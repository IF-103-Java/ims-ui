<div class="main-container">
  <div class="w-100 h-100">
    <div class="card shadow mb-4">
      <div class="card-body">
        <div class="table-responsive">
          <div class="container-fluid">
            <div class="row">
              <div class="d-none d-md-block col-md-1 col-lg-2 col-xl-3"></div>
              <div class="col-sm-12 col-md-10 col-lg-8 col-xl-6">
                <h5 class="m-0 font-weight-bold text-primary align-content-center header">YOUR PROFILE</h5>

                <!-- Nav -->
                <div class="nav">
                  <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item">
                      <a class="nav-link active" id="profile-tab" data-toggle="tab" href="#profile" role="tab"
                         aria-controls="profile" aria-selected="true">Personal Info</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" id="change-password-tab" data-toggle="tab" href="#password" role="tab"
                         aria-controls="password" aria-selected="false">Change password</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" id="delete-profile-tab" data-toggle="tab" href="#delete" role="tab"
                         aria-controls="delete" aria-selected="false">Delete profile</a>
                    </li>
                  </ul>
                </div>

                <!--Step 1:Personal info-->
                <div *ngIf="isFormDisable(); then showEdit else showUpdate"></div>
                <div class="tab-content" id="myTabContent">
                  <div class="tab-pane fade show active" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                    <br>
                    <form class="right-block" #data="ngForm" >
                      <table class="table table-hover mb-0">
                        <tbody>
                        <tr>
                          <th class="align-middle" scope="row">First Name:</th>
                          <td>
                            <input type="text" name="firstName" class="form-control border-none"
                                   [ngModel]="user.firstName"
                                   placeholder="First name" required [readOnly]="isFormDisable()">
                          </td>
                        </tr>
                        <tr>
                          <th class="align-middle" scope="row">Last Name:</th>
                          <td>
                            <input type="text" name="lastName" class="form-control border-none"
                                   [ngModel]="user.lastName"
                                   placeholder="Last name" required [readOnly]="isFormDisable()">
                          </td>
                        </tr>
                        <tr>
                          <th class="align-middle" scope="row">Email:</th>
                          <td class="td-padding">{{user.email}}</td>
                        </tr>
                        <tr>
                          <th class="align-middle" scope="row">Created Date:</th>
                          <td>{{dateFormatter(user.createdDate)}}, {{timeFormatter(user.createdDate)}}</td>
                        </tr>
                        <tr>
                          <th class="align-middle" scope="row">Updated Date:</th>
                          <td>{{dateFormatter(user.updatedDate)}}, {{timeFormatter(user.updatedDate)}}</td>
                        </tr>
                        <tr>
                          <th class="align-middle" scope="row">Role:</th>
                          <td>
                            <h5>
                              <span class="badge badge-info">{{user.role}}</span>
                              <div class="button-separator"></div>
                            </h5>
                          </td>
                        </tr>
                        </tbody>
                      </table>
                      <hr class="mt-0">

                      <ng-template #showEdit >
                        <i class="fas fa-pencil-alt icon" (click)="clickEditBtn()" ></i>
                      </ng-template>
                      <ng-template #showUpdate>
                        <button type="submit" class="btn btn-danger btn-primary button-left" (click)="clickCancelBtn()">Cancel</button>
                        <button type="submit" class="btn btn-primary button-left" [disabled]="!data.valid" (click)="update(data.value)">Save</button>
                      </ng-template>
                    </form>
                  </div>

                  <!--Step 2:  Change password-->
                  <div class="tab-pane fade" id="password" role="tabpanel" aria-labelledby="change-password-tab">
                    Password
                  </div>

                  <!--Step 3:  Delete profile-->

                  <div class="tab-pane fade" id="delete" role="tabpanel" aria-labelledby="delete-profile-tab">
                    <p>If you really want to delete profile, you should know than you lose all your data forever!</p>
                    <button class="btn btn-danger button-left" (click)="openDeleteModal(content)">Delete</button>
                  </div>
                </div>


                <div class="row">
                  <div class="button-separator"></div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Delete Modal-->
<ng-template #content let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLabel">Are you sure you want to delete this user?</h5>
    <button class="close" type="button" data-dismiss="modal" aria-label="Close" (click)="modalRef.close()">
      <span aria-hidden="true">Ã—</span>
    </button>
  </div>
  <div class="modal-body">Select "DELETE" below if you are ready to end work with us.</div>
  <div class="modal-footer">
    <button class="btn btn-secondary" (click)="modalRef.close()" type="button" data-dismiss="modal">Cancel</button>
    <a routerLink (click)="deleteUser()" class="btn btn-primary">Delete</a>
  </div>
</ng-template>


